<!DOCTYPE html>
<html>
<head>
  <title>Lobby</title>
</head>
<body>

<h2>Crear sala</h2>
<input type="text" id="nuevaSala" placeholder="Nombre sala">
<button onclick="crearSala()">Crear</button>

<h2>Salas disponibles</h2>
<ul id="listaSalas"></ul>

<script src="/socket.io/socket.io.js"></script>
<script>

const socket = io();

function crearSala() {
  const nombre = document.getElementById("nuevaSala").value;
  if (!nombre) return alert("Escribe un nombre");
  socket.emit("crearSala", nombre);
}

socket.on("listaSalas", (salas) => {

  const ul = document.getElementById("listaSalas");
  ul.innerHTML = "";

  salas.forEach(sala => {

    const li = document.createElement("li");

    li.innerHTML = `
      ${sala.nombre} (${sala.jugadores} jugadores)
      <button onclick="unirse('${sala.nombre}')">Unirse</button>
    `;

    ul.appendChild(li);
  });
});

function unirse(nombre) {
  socket.emit("unirseSala", nombre);
  window.location.href = "/sala?nombre=" + nombre;
}


</script>

</body>
</html>
















